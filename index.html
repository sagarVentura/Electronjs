<!DOCTYPE html>
<html>

<head>
  <title>SCORM Launcher</title>
  <style>

    body{
      margin: 0px;
      padding: .5em;
      box-sizing: border-box;
      overflow: hidden;
    }
    .card {
      padding: 20px;
      margin: 10px;
      border: 1px solid #ccc;
      cursor: pointer;
      background: #f9f9f9;
      border-radius: 8px;
    }

    #loadingModal {
      display: none;
      position: fixed;
      z-index: 999;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      background-color: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(3px);
      align-items: center;
      justify-content: center;
      flex-direction: column;
    }

    /* SVG spinner animation */
    .spinner {
      width: 80px;
      height: 80px;
      animation: rotate 2s linear infinite;
    }

    .spinner .path {
      stroke: #ffffff;
      stroke-linecap: round;
      animation: dash 1.5s ease-in-out infinite;
    }

    .imageContainer{
      width: 100%;
      position: relative;
      flex: 1 1 0;
    }
    .fullscreen-image {
      width: 100%;
      height: 100%;
      object-fit: contain;  /* Scale image to fit without cropping */
      object-position: center;
    }

    @keyframes rotate {
      100% {
        transform: rotate(360deg);
      }
    }

    @keyframes dash {
      0% {
        stroke-dasharray: 1, 150;
        stroke-dashoffset: 0;
      }

      50% {
        stroke-dasharray: 90, 150;
        stroke-dashoffset: -35;
      }

      100% {
        stroke-dasharray: 90, 150;
        stroke-dashoffset: -124;
      }
    }




    /* Small screens (e.g. phones) */
    @media (max-width: 600px) {
      body {
        font-size: 14px;
      }
    }

    /* Medium screens (e.g. tablets) */
    @media (min-width: 601px) and (max-width: 1024px) {
      body {
        font-size: 16px;
      }
    }

    /* Large screens (e.g. desktops) */
    @media (min-width: 1025px) {
      body {
        font-size: 20px;
      }
    }
  </style>
</head>

<body>
  <!-- Loading Modal -->
    <div id="loadingModal">
      <svg class="spinner" viewBox="0 0 50 50">
        <circle class="path" cx="25" cy="25" r="20" fill="none" stroke-width="5"></circle>
      </svg>
      <div style="color: #ffffff; font-weight: 600;font-family: Arial">Please wait, your ROOT lesson is getting ready...
      </div>
    </div>


    <div style="display: flex; flex-direction: column;width: 100%; height: 100%;">
      <div style="display: flex; justify-content: flex-end; margin-block: 1%;">
        <img src="./Asset/logo.png" alt="" srcset="" style="width:15%;">
      </div>
      <div class="imageContainer">
        <img src="./Asset/banner.png" alt="" srcset="" style="width:100% ;height: 100%;"  class="fullscreen-image">
        <div style="position: absolute; top: 30%;left: 1%; cursor: pointer;">
          <button style="background-color: #1d5262;cursor: pointer; color: white;padding-inline: 1em; padding-block: .5em; 
  border-radius: .5em; font-size: 1.2em; margin-top: 1em; border:none"
            onclick="startFunction(`package`)">Start</button>
        </div>
      </div>
      <!-- <div style="color: #abb925; font-size: 3em; font-weight: 600; font-family: Arial;">OFFline ROOT – Front Page ​</div>
  <div style="color: #1d5262; font-size: 2em;font-family: Arial;">Modules – Ring/Compact / Rotor and Air-jet​</div>
  <div style="color: #1b5161;font-size: 1.2em;font-family: Arial;">Speaker, position​</div> -->


    </div>
    <script>
      async function startFunction(name) {
        const modal = document.getElementById('loadingModal');
        modal.style.display = 'flex'; // Show modal

        try {
          let path = await window.scormAPI.decryptScorm(name);
          console.log("decrypt Path", path);
          if (path) {
            window.scormAPI.openScorm(path);
          }
        } catch (err) {
          console.error("Error decrypting/opening SCORM", err);
        } finally {
          modal.style.display = 'none'; // Hide modal
        }

        console.log("decrypt Path", path)
      }
    </script>



    <!-- logic of  rendering  card of  with name of scorm content define in encrypt folder -->
    <!-- <script>
    window.addEventListener('DOMContentLoaded', async () => {
      try{
     const courses = await window.scormAPI.getCourses();
      const container = document.getElementById('cardContainer');
      console.log("call goes",courses.length)

      courses.forEach(course => {
        console.log("Course",course)

        const card = document.createElement('div');
        card.className = 'card';
        card.textContent = course.name;
        card.onclick = async () => {
         let path= await window.scormAPI.decryptScorm(course.name);
           window.scormAPI.openScorm(path)

          console.log("decrypt Path",path)
        }
        container.appendChild(card);


      });
      
    }
  catch(err){
    console.log("print Error",err)

  }
}
  );
  </script> -->

</body>

</html>